<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Getting Started - Apalache Documentation</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Apalache User Manual</li><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="manual.html" class="active"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="tlc-config.html"><strong aria-hidden="true">3.</strong> TLC Configuration Files</a></li><li class="chapter-item expanded "><a href="types-and-annotations.html"><strong aria-hidden="true">4.</strong> Types and Annotations</a></li><li class="chapter-item expanded "><a href="features.html"><strong aria-hidden="true">5.</strong> Supported Features</a></li><li class="chapter-item expanded "><a href="preprocessing.html"><strong aria-hidden="true">6.</strong> TLA+ Preprocessing</a></li><li class="chapter-item expanded "><a href="tuning.html"><strong aria-hidden="true">7.</strong> Fine Tuning</a></li><li class="chapter-item expanded "><a href="kera.html"><strong aria-hidden="true">8.</strong> KerA: kernel logic of actions</a></li><li class="chapter-item expanded affix "><li class="part-title">TLA+ Language Manual for Engineers</li><li class="chapter-item expanded "><a href="lang/index.html"><strong aria-hidden="true">9.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="lang/standard-operators.html"><strong aria-hidden="true">10.</strong> The standard operators of TLA+</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="lang/booleans.html"><strong aria-hidden="true">10.1.</strong> Booleans</a></li><li class="chapter-item expanded "><a href="lang/control-and-nondeterminism.html"><strong aria-hidden="true">10.2.</strong> Control And Nondeterminism</a></li><li class="chapter-item expanded "><a href="lang/conditionals.html"><strong aria-hidden="true">10.3.</strong> Conditionals</a></li><li class="chapter-item expanded "><a href="lang/integers.html"><strong aria-hidden="true">10.4.</strong> Integers</a></li><li class="chapter-item expanded "><a href="lang/sets.html"><strong aria-hidden="true">10.5.</strong> Sets</a></li><li class="chapter-item expanded "><a href="lang/logic.html"><strong aria-hidden="true">10.6.</strong> Logic</a></li><li class="chapter-item expanded "><a href="lang/functions.html"><strong aria-hidden="true">10.7.</strong> Functions</a></li><li class="chapter-item expanded "><a href="lang/records.html"><strong aria-hidden="true">10.8.</strong> Records</a></li><li class="chapter-item expanded "><a href="lang/tuples.html"><strong aria-hidden="true">10.9.</strong> Tuples</a></li><li class="chapter-item expanded "><a href="lang/sequences.html"><strong aria-hidden="true">10.10.</strong> Sequences</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.11.</strong> Bags</div></li></ol></li><li class="chapter-item expanded "><a href="lang/user-operators.html"><strong aria-hidden="true">11.</strong> User-defined operators</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.</strong> Modules, Extends, and Instances</div></li><li class="chapter-item expanded affix "><li class="part-title">Idiomatic TLA+</li><li class="chapter-item expanded "><a href="idiomatic/index.html"><strong aria-hidden="true">13.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="idiomatic/000keep-minimum-state-variables.html"><strong aria-hidden="true">14.</strong> Keep state variables to the minimum</a></li><li class="chapter-item expanded "><a href="idiomatic/001assignments.html"><strong aria-hidden="true">15.</strong> Update state variables with assignments</a></li><li class="chapter-item expanded "><a href="idiomatic/002primes.html"><strong aria-hidden="true">16.</strong> Apply primes only to state variables</a></li><li class="chapter-item expanded affix "><li class="part-title">Design Documents</li><li class="chapter-item expanded "><a href="adr/002adr-types.html"><strong aria-hidden="true">17.</strong> ADR-002: types and type annotations</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Apalache Documentation</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/informalsystems/apalache" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#getting-started" id="getting-started">Getting Started</a></h1>
<p><strong>Table of Contents</strong></p>
<ol>
<li><a href="#apalacheOrTlc">Shall I use Apalache or TLC?</a></li>
<li><a href="#sysreq">System requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#example">An example of a TLA+ specification</a></li>
<li><a href="#parameters">Setting up specification parameters</a></li>
<li><a href="#running">Running the tool</a></li>
<li><a href="#principles">Principles of symbolic model checking with Apalache</a>
<ol>
<li><a href="#assignments">Assignments and symbolic transitions</a></li>
<li><a href="#types">Type annotations</a></li>
<li><a href="#recursion">Recursive operators and functions</a></li>
</ol>
</li>
<li><a href="#apalacheMod">The Apalache module</a></li>
<li><a href="#profiling">Profiling your specification</a></li>
<li><a href="#theory5">Five minutes of theory</a></li>
<li><a href="#features">Supported language features</a></li>
</ol>
<p><a name="apalacheOrTlc"></a></p>
<h1><a class="header" href="#1-shall-i-use-apalache-or-tlc" id="1-shall-i-use-apalache-or-tlc">1. Shall I use Apalache or TLC?</a></h1>
<p>We recommend starting with TLC. It is mature, well-documented, and
well-integrated into TLA+ Toolbox. Once you have debugged your TLA+
specification, and TLC is still producing too many reachable states, switch to
Apalache. We are using this approach at <a href="https://informal.systems/">Informal
Systems</a>.</p>
<p><a name="sysreq"></a></p>
<h1><a class="header" href="#2-system-requirements" id="2-system-requirements">2. System requirements</a></h1>
<p>Every commit to <a href="https://github.com/informalsystems/apalache">master</a> and
<a href="https://github.com/informalsystems/apalache/tree/unstable">unstable</a> is built
with <a href="https://github.com/informalsystems/apalache/actions?query=branch%3Aunstable+workflow%3Abuild">GitHub
actions</a>
on MacOS (JDK 1.8.0) and Linux (OpenJDK8). If you would like to run Apalache in
Windows, use a docker image. Check the <a href="https://docs.docker.com/docker-for-windows/">Docker
manual</a> and the section on <a href="#useDocker">Using
a docker image</a> for details.</p>
<p>As Apalache is using Microsoft Z3 as a backend SMT solver, the required memory
largely depends on Z3. We recommend to allocate at least 4GB of memory for the
tool.</p>
<p><a name="installation"></a></p>
<h1><a class="header" href="#3-installation" id="3-installation">3. Installation</a></h1>
<p>There are three ways to run Apalache:</p>
<ol>
<li>Download the <a href="https://github.com/informalsystems/apalache/releases">latest release</a>
and run apalache in JVM,</li>
<li>Download and run a <a href="https://docker.com">docker</a> image, or</li>
<li>Build Apalache from sources and run the compiled package.</li>
</ol>
<p>If you just want to try the tool, we recommend downloading the release or
pulling the docker image. If you would like to run the tool on a daily basis or
<a href="https://github.com/informalsystems/apalache/blob/unstable/CONTRIBUTING.md">contribute</a> to the project, we recommend building the project from the
source.</p>
<p><a name="runningJava"></a></p>
<h2><a class="header" href="#31-running-in-java-virtual-machine" id="31-running-in-java-virtual-machine">3.1. Running in Java Virtual Machine</a></h2>
<p>You have to download and install a Java Virtual Machine first. For instance,
<a href="https://openjdk.java.net/">OpenJDK</a> should work (we tried Apalache with OpenJDK 11).</p>
<p>Once you have installed Java, download the <a href="https://github.com/informalsystems/apalache/releases">latest
release</a> and unpack into
a directory of your choice. Depending on your OS, you have two options.</p>
<p><em>Option 1: Linux, MacOS.</em> You can run the script <code>./bin/apalache-mc</code>. It is
that simple.</p>
<p><em>Option 2: Windows.</em> You have to run Java directly:</p>
<ul>
<li>
<p>Check the application name in the directory <code>mod-distribution\target</code>.
It should be called <code>apalache-pkg-X.Y.Z-RELEASE-full.jar</code>, where <code>X.Y.Z</code>
is the release number, for instance, 0.8.0.</p>
</li>
<li>
<p>Run Java as follows:</p>
</li>
</ul>
<pre><code>java.exe -cp mod-distribution\target\apalache-pkg-X.Y.Z-RELEASE-full.jar &lt;args&gt;
</code></pre>
<p>The arguments <code>&lt;args&gt;</code> are explained in <a href="#running">Running the tool</a>.</p>
<p>If you would like to contribute a command-line script for running Apalache in
Windows, please <a href="https://github.com/informalsystems/apalache/blob/unstable/CONTRIBUTING.md#making-a-pull-request">open a pull
request</a>.</p>
<p><a name="useDocker"></a></p>
<h2><a class="header" href="#32-using-a-docker-image" id="32-using-a-docker-image">3.2. Using a docker image</a></h2>
<p><strong>We publish Docker images for every release</strong> :sunglasses:</p>
<p><a href="https://docker.com">Docker</a> lets you to run Apalache in an isolated container.
All dependencies are already installed in docker. However, you have to install docker.</p>
<p>To get the latest Apalache image, issue the command:</p>
<pre><code class="language-bash">docker pull apalache/mc
</code></pre>
<h3><a class="header" href="#running-the-docker-image" id="running-the-docker-image">Running the docker image</a></h3>
<p>To run an Apalache image, issue the command:</p>
<pre><code class="language-bash">$ docker run --rm -v &lt;your-spec-directory&gt;:/var/apalache apalache/mc &lt;args&gt;
</code></pre>
<p>The following docker parameters are used:</p>
<ul>
<li>
<p><code>--rm</code> to remove the container on exit</p>
</li>
<li>
<p><code>-v &lt;your-spec-directory&gt;:/var/apalache</code> bind-mounts <code>&lt;your-spec-directory&gt;</code> into
<code>/var/apalache</code> in the container. <strong>This is necessary for
Apalache to access your specification and the modules it
extends.</strong>
From the user perspective, it works as if Apalache was
executing in <code>&lt;your-spec-directory&gt;</code>.
In particular the tool logs are written in that directory.</p>
<p>When using SELinux, you might have to use the modified form of <code>-v</code> option:
<code>-v &lt;your-spec-directory&gt;:/var/apalache:z</code></p>
</li>
<li>
<p><code>apalache/mc</code> is the APALACHE docker image name. By default, the <code>latest</code> stable
version is used; you can also refer to a specific tool version, e.g., <code>apalache/mc:0.6.0</code> or <code>apalache/mc:unstable</code></p>
</li>
<li>
<p><code>&lt;args&gt;</code> are the tool arguments as described in
<a href="#running">Running the tool</a>.</p>
</li>
</ul>
<p>We provide a convenience wrapper for this docker command in
<code>script/run-docker.sh</code>. To run the <code>latest</code> image using the script, execute</p>
<pre><code class="language-bash">$ $APALACHE_HOME/script/run-docker.sh &lt;args&gt;
</code></pre>
<p>To specify a different image, set <code>APALACHE_TAG</code> like so:</p>
<pre><code class="language-bash">$ APALACHE_TAG=foo $APALACHE_HOME/script/run-docker.sh &lt;args&gt;
</code></pre>
<h3><a class="header" href="#setting-an-alias" id="setting-an-alias">Setting an alias</a></h3>
<p>If you are running Apalache on Linux :penguin: or MacOS
:green_apple:, you can define this handy alias in your rc file, which runs
Apalache in docker while sharing the working directory:</p>
<pre><code class="language-bash"># using the latest stable
$ alias apalache=&quot;docker run --rm -v $(pwd):/var/apalache apalache/mc&quot;
# using the latest unstable
$ alias apalache=&quot;docker run --rm -v $(pwd):/var/apalache apalache/mc:unstable&quot;
</code></pre>
<h3><a class="header" href="#using-the-unstable-version-of-apalache" id="using-the-unstable-version-of-apalache">Using the unstable version of Apalache</a></h3>
<p>The development of Apalache proceeds at a high pace, and we introduce a
substantial number of improvements in the unstable branch before the next stable
release. Please refer to the <a href="https://github.com/informalsystems/apalache/blob/unstable/CHANGES.md">change
log</a> and
<a href="https://github.com/informalsystems/apalache/blob/unstable/docs/src/manual.md">manual</a>
on the unstable branch for the description of the newest features. <strong>We
recommend using the unstable version if you want to try all the exciting new
features of Apalache. But be warned: It is called &quot;unstable&quot; for a reason</strong>. To
use <code>unstable</code>, just type <code>apalache/mc:unstable</code> instead of <code>apalache/mc</code>
everywhere.</p>
<p>Do not forget to pull the docker image from time to time:</p>
<pre><code class="language-bash">docker pull apalache/mc:unstable
</code></pre>
<p>Run it with the following command:</p>
<pre><code class="language-bash">$ docker run --rm -v &lt;your-spec-directory&gt;:/var/apalache apalache/mc:unstable &lt;args&gt;
</code></pre>
<p>To create an alias pointing to the <code>unstable</code> version:</p>
<pre><code class="language-bash">$ alias apalache=&quot;docker run --rm -v $(pwd):/var/apalache apalache/mc:unstable&quot;
</code></pre>
<h3><a class="header" href="#building-an-image" id="building-an-image">Building an image</a></h3>
<p>For an end user there is no need to build an Apalache image. If you like to
produce a modified docker image, take into account that it will take about 30
minutes for the image to get built, due to compilation times of Microsoft Z3. To
build a docker image of Apalache, issue the following command in
<code>$APALACHE_HOME</code>:</p>
<pre><code class="language-bash">$ docker image build -t apalache:0.7.0 .
</code></pre>
<p><a name="building-from-source"></a></p>
<h2><a class="header" href="#33-building-from-source" id="33-building-from-source">3.3. Building from source</a></h2>
<ol>
<li>Install <code>git</code>.</li>
<li>Install <a href="https://openjdk.java.net/install/">OpenJDK8</a> or <a href="https://www.azul.com/downloads/zulu-community/?&amp;architecture=x86-64-bit&amp;package=jdk">Zulu JDK8</a>.
<ul>
<li>Apalache currently requires Scala 12.0 so <strong>you must install version 8 of
Java, otherwise Scala will not compile!</strong> See the <a href="https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html">compatibility table</a>.</li>
</ul>
</li>
<li>Install <a href="https://maven.apache.org/">Apache Maven</a>.
<ul>
<li>On Debian Linux or Ubuntu: <code>sudo apt-get install maven</code>.</li>
<li>On Arch: <code>sudo pacman -Syu maven</code></li>
</ul>
</li>
<li>Clone the git repository: <code>git clone https://github.com/informalsystems/apalache.git</code>.</li>
<li>Change into the project directory: <code>cd apalache</code>.</li>
<li>Run <code>make</code>.</li>
<li><em>Optionally</em> install <a href="https://direnv.net/">direnv</a> and run <code>direnv allow</code></li>
<li>Confirm you can run the executable. It should print the inline CLI help message.
<ul>
<li>If you used <code>direnv</code>, then <code>apalache-mc</code> will be in your path.</li>
<li>Otherwise, run <code>./bin/apalache-mc</code>.</li>
</ul>
</li>
</ol>
<p><a name="example"></a></p>
<h1><a class="header" href="#4-an-example-of-a-tla-specification" id="4-an-example-of-a-tla-specification">4. An example of a TLA+ specification</a></h1>
<p>To illustrate the features of Apalache, we use the following TLA+ specification,
which can be found in <a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/y2k.tla"><code>test/tla/y2k.tla</code></a>:</p>
<pre><code class="language-tla">-------------------------------- MODULE y2k --------------------------------
(*
 * A simple specification of a year counter that is subject to the Y2K problem.
 * In this specification, a registration office keeps records of birthdays and
 * issues driver's licenses. As usual, a person may get a license, if they
 * reached a certain age, e.g., age of 18. The software engineers never thought
 * of their program being used until the next century, so they stored the year
 * of birth using only two digits (who would blame them, the magnetic tapes
 * were expensive!). The new millennium came with new bugs.
 *
 * This is a made up example, not reflecting any real code.
 * To learn more about Y2K, check: https://en.wikipedia.org/wiki/Year_2000_problem
 *
 * Igor Konnov, January 2020
 *)
EXTENDS Integers

CONSTANT BIRTH_YEAR,    \* the year to start with, between 0 and 99
         LICENSE_AGE    \* the minimum age to obtain a license

ASSUME(BIRTH_YEAR \in 0..99)
ASSUME(LICENSE_AGE \in 1..99)

VARIABLE year, hasLicense

Age == year - BIRTH_YEAR

Init ==
    /\ year = BIRTH_YEAR
    /\ hasLicense = FALSE

NewYear ==
    /\ year' = (year + 1) % 100 \* the programmers decided to use two digits
    /\ UNCHANGED hasLicense

IssueLicense ==
    /\ Age &gt;= LICENSE_AGE
    /\ hasLicense' = TRUE
    /\ UNCHANGED year

Next ==
    \/ NewYear
    \/ IssueLicense

\* The somewhat &quot;obvious&quot; invariant, which is violated
Safety ==
    hasLicense =&gt; (Age &gt;= LICENSE_AGE)

\* This is probably the only invariant we can formulate, usually, it is called TypeOK
Inv ==
    /\ year \in 0..99
    /\ hasLicense \in BOOLEAN
=============================================================================
</code></pre>
<p><a name="parameters"></a></p>
<h1><a class="header" href="#5-setting-up-specification-parameters" id="5-setting-up-specification-parameters">5. Setting up specification parameters</a></h1>
<p>Similar to TLC, Apalache requires the specification parameters to be restricted
to finite values. In contrast to TLC, there is a way to initialize parameters
by writing a symbolic constraint, see <a href="#ConstInit">Section 5.3</a>.</p>
<h2><a class="header" href="#51-using-instance" id="51-using-instance">5.1. Using INSTANCE</a></h2>
<p>You can set the specification parameters, using the standard <code>INSTANCE</code>
expression of TLA+. For instance, below is the example
<a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/y2k_instance.tla"><code>test/tla/y2k_instance.tla</code></a>, which instantiates
<code>y2k.tla</code>:</p>
<pre><code class="language-tla">---------------------------- MODULE y2k_instance ----------------------------
VARIABLE year, hasLicense

INSTANCE y2k WITH BIRTH_YEAR &lt;- 80, LICENSE_AGE &lt;- 18
=============================================================================
</code></pre>
<p>The downside of this approach is that you have to declare the variables of the
extended specification. This is easy with only two variables, but can quickly
become unwieldy.</p>
<h2><a class="header" href="#52-convention-over-configuration" id="52-convention-over-configuration">5.2. Convention over configuration</a></h2>
<p>Alternatively, you can extend the base module and use overrides:</p>
<pre><code class="language-tla">---------------------------- MODULE y2k_override ----------------------------
EXTENDS y2k

OVERRIDE_BIRTH_YEAR == 80
OVERRIDE_LICENSE_AGE == 18
=============================================================================
</code></pre>
<p><a name="ConstInit"></a></p>
<h2><a class="header" href="#53-constinit-predicate" id="53-constinit-predicate">5.3. ConstInit predicate</a></h2>
<p>This approach is similar to the <code>Init</code> operator, but applied to the
constants. We define a special operator, e.g., called <code>ConstInit</code>. For
instance, below is the example
<a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/y2k_cinit.tla"><code>test/tla/y2k_cinit.tla</code></a>:</p>
<pre><code class="language-tla">---------------------------- MODULE y2k_cinit ----------------------------
EXTENDS y2k

ConstInit ==
    /\ BIRTH_YEAR \in 0..99
    /\ LICENSE_AGE \in 10..99
=============================================================================
</code></pre>
<p>To use <code>ConstInit</code>, pass it as the argument to <code>apalache</code>. For instance, for
<code>y2k_cinit</code>, we would run the model checker as follows:</p>
<pre><code class="language-tla">$ cd $APALACHE_HOME/test/tla
$ apalache check --inv=Safety \
  --length=20 --cinit=ConstInit y2k_cinit.tla
</code></pre>
<h3><a class="header" href="#parameterized-initialization" id="parameterized-initialization">Parameterized initialization</a></h3>
<p>As a bonus of this approach, Apalache allows one to check a specification over a
bounded set of parameters. For example:</p>
<pre><code class="language-tla">CONSTANT N, Values

ConstInit ==
  /\ N \in 3..10
  /\ Values \in SUBSET 0..4
  /\ Values /= {}
</code></pre>
<p>The model checker will try the instances for all the combinations of
the parameters specified in <code>ConstInit</code>, that is, in our example, it will
consider <code>N \in 3..10</code> and all non-empty value sets that are subsets of <code>0..4</code>.</p>
<h3><a class="header" href="#limitation" id="limitation">Limitation</a></h3>
<p><code>ConstInit</code> should be a conjunction of assignments and possibly of additional
constraints on the constants. For instance, you should not write <code>N = 10 \/ N = 20</code>. However, you can write <code>N \in {10, 20}</code>.</p>
<h2><a class="header" href="#54-tlc-configuration-file" id="54-tlc-configuration-file">5.4. TLC configuration file</a></h2>
<p>We support configuring Apalache via TLC configuration files; these files are
produced automatically by TLA Toolbox, for example. TLC configuration files
allow one to specify which initialization predicate and transition predicate to
employ, which invariants to check, as well as to initialize specification
parameters. Some features of the TLC configuration files are not supported yet.
Check the manual page on <a href="./tlc-config.html">&quot;Syntax of TLC Configuration Files&quot;</a>.</p>
<p><em>If you are checking a file <code>&lt;myspec&gt;.tla</code>, and the file <code>&lt;myspec&gt;.cfg</code> exists in
the same directory, it will be picked up by Apalache automatically. You can also
explicitly specify which configuration file to use via the <code>--config</code> option.</em></p>
<p><a name="running"></a></p>
<h1><a class="header" href="#6-running-the-tool" id="6-running-the-tool">6. Running the tool</a></h1>
<h2><a class="header" href="#61-model-checker-command-line-parameters" id="61-model-checker-command-line-parameters">6.1. Model checker command-line parameters</a></h2>
<p>The model checker can be run as follows:</p>
<pre><code class="language-bash">$ apalache check [--config=filename] [--init=Init] [--cinit=ConstInit] \
    [--next=Next] [--inv=Inv] [--length=10] [--tuning=filename] &lt;myspec&gt;.tla
</code></pre>
<p>The arguments are as follows:</p>
<ul>
<li><code>--config</code> specifies the <a href="./tlc-config.html">TLC configuration file</a>,
the default name is <code>&lt;myspec&gt;.cfg</code></li>
<li><code>--init</code> specifies the initialization predicate, the default name is <code>Init</code></li>
<li><code>--next</code> specifies the transition predicate, the default name is <code>Next</code></li>
<li><code>--cinit</code> specifies the constant initialization predicate, optional</li>
<li><code>--inv</code> specifies the invariant to check, optional</li>
<li><code>--length</code> specifies the upper bound on the length of the finite executions to explore</li>
<li><code>--tuning</code> specifies the properties file that stores the options for
<a href="tuning.html">fine tuning</a></li>
</ul>
<p>If an initialization predicate, transition predicate, or invariant is specified both in the configuration file,
and on the command line, the command line parameters take precedence over those in the configuration file.</p>
<h3><a class="header" href="#bounded-model-checking" id="bounded-model-checking">Bounded model checking</a></h3>
<p>By default, Apalache performs <em>bounded model checking</em>, that is,
it encodes a symbolic execution of length <code>k</code> and an invariant violation
in SMT:</p>
<pre><code class="language-tla">/\ Init[v_0/v]
/\ Next[v_0/v, v_1/v'] /\ Next[v_1/v, v_2/v'] /\ ... /\ Next[v_{k-1}/v, v_k/v']
/\ ~Inv[v_0/v] \/ ~Inv[v_1/v] \/ ... \/ ~Inv[v_k/v]
</code></pre>
<p>Here an expression <code>Inv[v_i/v]</code> means that the state variables <code>v</code> are replaced
with their copies <code>v_i</code> for the state <code>i</code>.  Likewise, <code>Next[v_i/v,v_{i+1}/v']</code>
means that the state variables <code>v</code> are replaced with their copies <code>v_i</code> for the
state <code>i</code>, whereas the state variables <code>v'</code> are replaced with their copies
<code>v_{i+1}</code> for the state <code>i+1</code>.</p>
<h4><a class="header" href="#bounded-model-checking-is-an-incomplete-technique" id="bounded-model-checking-is-an-incomplete-technique">Bounded model checking is an incomplete technique</a></h4>
<p>If Apalache finds a bug in this symbolic execution (by querying z3), then it
reports a counterexample. Otherwise, it reports that no bug was found up to the
given length. If a bug needs a long execution to get revealed, bounded model
checking may miss it!</p>
<h3><a class="header" href="#checking-an-inductive-invariant" id="checking-an-inductive-invariant">Checking an inductive invariant</a></h3>
<p>To check executions of arbitrary lengths, one usually finds a formula that
satisfies the two following properties:</p>
<pre><code class="language-tla">/\ Init =&gt; TypeOK /\ IndInv
/\ TypeOK /\ IndInv /\ Next =&gt; TypeOK' /\ IndInv'
</code></pre>
<p>In normal words: (1) The initial states satisfy the constraint <code>TypeOK /\ IndInv</code>, and (2) whenever the specification makes a step when starting in a
state that satisfies <code>TypeOK /\ IndInv</code>, it ends up in a state that again
satisfies <code>TypeOK /\ IndInv</code>.</p>
<p>Note that we usually check <code>IndInv</code> in conjunction with <code>TypeOK</code>, as we
have to constrain the variable values. In the <code>y2k</code> example, our inductive
invariant is actually constraing the variables. In fact, such an inductive
invariant is usually called <code>TypeOK</code>.</p>
<p>To check an inductive invariant <code>IndInv</code> in Apalache, you run two commands
that check the above two formulas:</p>
<pre><code class="language-bash">$ apalache check --init=Init --inv=IndInv --length=0 &lt;myspec&gt;.tla
</code></pre>
<p>and</p>
<pre><code class="language-bash">$ apalache check --init=IndInv --inv=IndInv --length=1 &lt;myspec&gt;.tla
</code></pre>
<h2><a class="header" href="#62-examples" id="62-examples">6.2. Examples</a></h2>
<h3><a class="header" href="#checking-safety-up-to-20-steps" id="checking-safety-up-to-20-steps">Checking safety up to 20 steps</a></h3>
<pre><code class="language-bash">$ cd test/tla
$ apalache check --length=20 --inv=Safety y2k_override.tla
</code></pre>
<p>This command checks, whether <code>Safety</code> can be violated in 20 specification
steps. If <code>Safety</code> is not violated, your spec might still have a bug that
requires a computation longer than 20 steps to manifest.</p>
<h3><a class="header" href="#checking-an-inductive-invariant-1" id="checking-an-inductive-invariant-1">Checking an inductive invariant:</a></h3>
<pre><code class="language-bash">$ cd test/tla
$ apalache check --length=0 --init=Init --inv=Inv y2k_override.tla
$ apalache check --length=1 --init=Inv  --inv=Inv y2k_override.tla
</code></pre>
<p>The first call to apalache checks, whether the initial states
satisfy the invariant. The second call to apalache checks, whether
a single specification step satisfies the invariant, when starting
in a state that satisfies the invariant. (That is why these
invariants are called inductive.)</p>
<h3><a class="header" href="#using-a-constant-initializer" id="using-a-constant-initializer">Using a constant initializer:</a></h3>
<pre><code class="language-bash">$ cd test/tla
apalache check --cinit=ConstInit --length=20 --inv=Safety y2k_cinit.tla
</code></pre>
<p>This command checks, whether <code>Safety</code> can be violated in 20
specification steps. The constants are initialized with the predicate
<code>ConstInit</code>, defined in <code>y2k_cinit.tla</code> as:</p>
<pre><code class="language-tla">ConstInit == BIRTH_YEAR \in 0..99 /\ LICENSE_AGE \in 10..99
</code></pre>
<p>In this case, Apalache finds a safety violation, e.g., for
<code>BIRTH_YEAR=89</code> and <code>LICENSE_AGE=10</code>. A complete counterexample
is printed in <code>counterexample.tla</code>.</p>
<p>The final lines in the file clearly indicate the state that violates the
invariant:</p>
<pre><code class="language-tla">State14 ==
/\ BIRTH_YEAR = 89
/\ LICENSE_AGE = 10
/\ hasLicense = TRUE
/\ year = 0

(* The following formula holds true in the last state and violates the invariant *)

InvariantViolation == hasLicense /\ year - BIRTH_YEAR &lt; LICENSE_AGE
</code></pre>
<p><a name="lookup"></a></p>
<h2><a class="header" href="#63-module-lookup" id="63-module-lookup">6.3. Module lookup</a></h2>
<p>Apalache uses <a href="https://lamport.azurewebsites.net/tla/tools.html">the SANY
parser</a>, which is the
standard parser of TLC and TLA+ Toolbox. By default, SANY is looking for the
modules in the current working directory and in the Java package
<code>tla2sany.StandardModules</code>, which is usually provided by the <code>tla2tools.jar</code> that is
included in the Java classpath.</p>
<p>In addition to the modules in the current working directory, Appalache provides</p>
<ul>
<li>a small standard library (located in <code>$APALACHE_HOME/src/tla</code>), and</li>
<li>support for additional source directories specified in the environment variable <code>TLA_PATH</code>. <code>TLA_PATH</code> should be a list of paths to directories separated by <code>:</code>. </li>
</ul>
<p>(Directories in the <code>TLA_PATH</code> are provided to SANY via the <code>TLA-Library</code> Java system variable.)</p>
<p>So the module lookup order in Apalache is as follows:</p>
<ol>
<li>The current working directory.</li>
<li>The directory <code>$APALACHE_HOME/src/tla</code>.</li>
<li>The directories specified in the environment variable <code>TLA_PATH</code>.</li>
<li>The Java package <code>tla2sany.StandardModules</code>.</li>
</ol>
<p><strong>Note:</strong> To let TLA+ Toolbox and TLC know about the Apalache modules, include
<code>$APALACHE_HOME/src/tla</code> in the lookup directories, as explained by Markus
Kuppe for the <a href="https://github.com/tlaplus/CommunityModules">TLA+ Community
Modules</a>.</p>
<p><a name="detailed"></a></p>
<h2><a class="header" href="#64-detailed-output" id="64-detailed-output">6.4. Detailed output</a></h2>
<p>The tool will display only important messages on stdout, but a detailed log can
be found in <code>detailed.log</code>.</p>
<p>Additionally, each pass of the model checker produces an intermediate TLA+ file in
the run-specific directory <code>x/hh.mm-DD.MM.YYYY-&lt;id&gt;</code>:</p>
<ul>
<li>File <code>out-parser.tla</code> is produced as a result of parsing and importing
into the intermediate representation, Apalache TLA IR.</li>
<li>File <code>out-parser.json</code> is produced as a result of converting the
Apalache TLA IR representation of the input into JSON format.</li>
<li>File <code>out-config.tla</code> is produced as a result of substituting CONSTANTS,
as described in <a href="#parameters">Section 5</a>.</li>
<li>File <code>out-inline.tla</code> is produced as a result of inlining operator
definitions and <code>LET-IN</code> definitions.</li>
<li>File <code>out-priming.tla</code> is produced as a result of replacing constants and
variables in <code>ConstInit</code> and <code>Init</code> with their primed versions.</li>
<li>File <code>out-vcgen.tla</code> is produced as a result of extracting verification
conditions, e.g., invariants to check.</li>
<li>File <code>out-prepro.tla</code> is produced as a result of running all preprocessing
steps.</li>
<li>File <code>out-transition.tla</code> is produced as a result of finding assignments
and symbolic transitions.</li>
<li>File <code>out-opt.tla</code> is produced as a result of expression optimizations.</li>
<li>File <code>out-analysis.tla</code> is produced as a result of analysis, e.g.,
marking Skolemizable expressions and expressions to be expanded.</li>
</ul>
<p><a name="parsing"></a></p>
<h2><a class="header" href="#65-parsing-and-pretty-printing" id="65-parsing-and-pretty-printing">6.5. Parsing and pretty-printing</a></h2>
<p>If you'd like to check that your TLA+ specification is syntactically correct,
without running the model checker, you can run the following command:</p>
<pre><code class="language-bash">$ apalache parse &lt;myspec&gt;.tla
</code></pre>
<p>In this case, Apalache performs the following steps:</p>
<ol>
<li>
<p>It parses the specification with <a href="https://lamport.azurewebsites.net/tla/tools.html">SANY</a>.</p>
</li>
<li>
<p>It translates SANY semantic nodes into <a href="https://github.com/informalsystems/apalache/blob/master/tlair/src/main/scala/at/forsyte/apalache/tla/lir/package.scala">Apalache IR</a>.</p>
</li>
<li>
<p>It pretty-prints the IR into <code>out-parser.tla</code>, see <a href="#detailed">Section 6.3</a>.</p>
</li>
</ol>
<p><a name="principles"></a></p>
<h1><a class="header" href="#7-principles-of-symbolic-model-checking-with-apalache" id="7-principles-of-symbolic-model-checking-with-apalache">7. Principles of symbolic model checking with Apalache</a></h1>
<p>In order to take advantage of Apalache's symbolic model checking, there are a
few principles one must bear in mind when writing TLA.</p>
<p><a name="assignments"></a>
<a name="symbolicTransitions"></a></p>
<h2><a class="header" href="#71-assignments-and-symbolic-transitions" id="71-assignments-and-symbolic-transitions">7.1 Assignments and symbolic transitions</a></h2>
<p>Let us go back to the example <a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/y2k.tla"><code>test/tla/y2k.tla</code></a> and
run <code>apalache</code> against <a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/y2k_override.tla"><code>test/tla/y2k_override.tla</code></a>:</p>
<pre><code class="language-console">$ apalache check y2k_override.tla
</code></pre>
<p>We can check the detailed output of the <code>TransitionFinderPass</code> in the file
<code>x/&lt;timestamp&gt;/out-transition.tla</code>, where <code>&lt;timestamp&gt;</code> looks like
<code>09.03-10.03.2020-508266549191958257</code>:</p>
<pre><code class="language-tla">----- MODULE y2k_override -----
VARIABLE year
VARIABLE hasLicense
ASSUME(80 \in 0 .. 99)
ASSUME(18 \in 1 .. 99)

Init$0 == year' := 80 /\ hasLicense' := FALSE
Next$0 == year' := ((year + 1) % 100) /\ (hasLicense' := hasLicense)
Next$1 == year - 80 &gt;= 18 /\ hasLicense' := TRUE /\ (year' := year)
===============
</code></pre>
<p>As you can see, the model checker did two things:</p>
<ol>
<li>It has translated several expressions that look like <code>x' = e</code> into <code>x' := e</code>.
For instance, you can see <code>year' := 80</code> and <code>hasLicense' := FALSE</code> in
<code>Init$0</code>. We call these expressions <strong>assignments</strong>.</li>
<li>It has factored the operator <code>Next</code> into two operators <code>Next$0</code> and <code>Next$1</code>.
We call these operators <strong>symbolic transitions</strong>.</li>
</ol>
<p>Pure TLA+ does not have the notions of assignments and symbolic
transitions.  However, TLC sometimes treats expressions <code>x' = e</code> and <code>x' \in S</code>
as if they were assigning a value to the variable <code>x'</code>. TLC does so
dynamically, during the breadth-first search. Apalache looks statically for assignments
among the expressions <code>x' = e</code> and <code>x' \in S</code>.</p>
<p>When factoring out operators into symbolic transitions, Apalache splits the
action operators <code>Init</code> and <code>Next</code> into disjunctions (e.g., <code>A_0 \/ ... \/ A_n</code>),
represented in the concrete syntax as a sequence of operator definitions of the
form</p>
<pre><code class="language-tla">A$0 == ...
...
A$n == ...
</code></pre>
<p>The main contract between the assignments and symbolic transitions is as
follows:</p>
<blockquote>
<p>For every variable <code>x</code> declared with <code>VARIABLE</code>, there is exactly one
assignment of the form <code>x' := e</code> in every symbolic transition <code>A_n</code>.</p>
</blockquote>
<p>If Apalache cannot find expressions with the above properties, it fails.
Consider the example
<a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/Assignments20200309.tla"><code>test/tla/Assignments20200309.tla</code></a>:</p>
<pre><code class="language-tla">----- MODULE Assignments20200309 -----
VARIABLE a
\* this specification fails, as it has no expression
\* that can be treated as an assignment
Init == TRUE
Next == a' = a
Inv == FALSE
===============
</code></pre>
<p>Running the checker with</p>
<pre><code class="language-bash">apalache check Assignments20200309.tla
</code></pre>
<p>Apalache reports an error as follows:</p>
<pre><code class="language-console">...
PASS #6: TransitionFinderPass                                     I@09:39:33.527
To understand the error, check the manual:
[https://github.com/informalsystems/apalache/blob/unstable/docs/src/manual.md#assignments]
Assignment error: Failed to find assignments and symbolic transitions in InitPrimed E@09:39:33.676
It took me 0 days  0 hours  0 min  1 sec                          I@09:39:33.678
Total time: 1.88 sec                                              I@09:39:33.678
EXITCODE: ERROR (99)
</code></pre>
<p>This error is cryptic. It does not indicate which parts of the specification
have caused the problem. In the future, we will add better diagnostic in the
assignment finder, see <a href="https://github.com/informalsystems/apalache/issues/111">the open
issue</a>. Our current approach is
to debug assignments by running TLC first. If running TLC takes too long, you
may try to comment out parts of the specification to find the problematic
action. Although this is tedious, it allows one to find missing assignments
rather quickly.</p>
<p>If you are interested in the technique for finding the assignments and symbolic
transitions implemented in Apalache, check our <a href="http://forsyte.at/wp-content/uploads/abz2018_full.pdf">paper at
ABZ'18</a>.  The <a href="http://dx.doi.org/https://doi.org/10.1016/j.scico.2019.102361">journal
version</a> is
unfortunately behind the Elsevier paywall, which will be lifted after the
two-year embargo period.</p>
<p><a name="types"></a></p>
<h2><a class="header" href="#72-type-annotations" id="72-type-annotations">7.2 Type annotations</a></h2>
<p><strong>NOTE 1</strong>: <a href="https://forsyte.at/people/kukovec/">Jure Kukovec</a> is developing
a completely automatic type inference engine. As soon as it is ready, type
annotations will no longer be required. Until that happy day, refer to <a href="types-and-annotations.html">type
annotations</a>.</p>
<p><strong>NOTE 2</strong>: We are currently working on a better syntax for type annotations
and a better type checker. Hence, the syntax will change in the future.</p>
<p>Apalache requires two kinds of type annotations:</p>
<ul>
<li>type annotations for empty sets and sequences, and</li>
<li>type annotations for records and sets of records.</li>
</ul>
<h3><a class="header" href="#721-empty-sets-and-sequences" id="721-empty-sets-and-sequences">7.2.1 Empty sets and sequences</a></h3>
<p>Consider the following example
<a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/NeedForTypes.tla"><code>test/tla/NeedForTypes.tla</code></a>:</p>
<pre><code class="language-tla">------------------------ MODULE NeedForTypes ------------------------------
(**
 * This simple example transforms a set into a sequence.
 *)
EXTENDS Integers, Sequences, FiniteSets

CONSTANTS InSet     \* an input set
VARIABLES Left,     \* a storage for the yet untransformed elements
          OutSeq    \* the output sequence

ConstInit == InSet = 1..4

Init ==
    /\ OutSeq = &lt;&lt; &gt;&gt;
    /\ Left = InSet

Next ==
    IF Left = {}
    THEN UNCHANGED &lt;&lt;Left, OutSeq&gt;&gt;
    ELSE \E x \in Left:
          /\ OutSeq' = Append(OutSeq, x)
          /\ Left' = Left \ {x}

Inv == InSet = Left \union { OutSeq[i]: i \in DOMAIN OutSeq }
===========================================================================
</code></pre>
<p>While this example is perfectly fine for TLC, Apalache has to assign types to
the variables, in order to construct SMT constraints. In some cases, Apalache
can infer types completely automatically, e.g., as in the <code>y2k</code> example (see
<a href="#example">Section 4</a>). However, if you run <code>apalache check --cinit=ConstInit NeedForTypes.tla</code>, the tool will complain:</p>
<pre><code>Step 0, level 0: checking if 1 transition(s) are enabled and violate the invariant I@15:17:14.313
Step 0, level 1: collecting 1 enabled transition(s)               I@15:17:14.360
Step 1, level 1: checking if 2 transition(s) are enabled and violate the invariant I@15:17:14.374
NeedForTypes.tla:18:8-18:16, =(...), type error: Expected equal types: FinSet[Int] and FinSet[Unknown] E@15:17:14.379
The outcome is: Error                                             I@15:17:14.388
</code></pre>
<p>In a somewhat obfuscated way, Apalache tells us the following. It has inferred
that <code>Left</code> is a set of integers, that is, <code>FinSet[Int]</code>. First, it found that
<code>InSet</code> is a set of integers, by applying <code>ConstInit</code>. Second, as <code>Left = InSet</code>
in <code>Init</code>, it inferred that <code>Left</code> is also a set of integers. Third, when
applying <code>Next</code>, it processed <code>{}</code>, which is an empty set of any kind of
objects. Hence, <code>{}</code> was assigned the type <code>FinSet[Unknown]</code>, that is, a set of
some type. Finally, it found the expression <code>Left = {}</code>, and here the type
checker has failed.</p>
<p>To help the type checker, we have to introduce a few type annotations. But
before doing that, we introduce the notation for type annotations in the
specification.</p>
<h4><a class="header" href="#syntax-for-type-annotations" id="syntax-for-type-annotations">Syntax for type annotations</a></h4>
<p>Apalache reads any expression formed with the <code>&lt;:</code> operator as an annotation of
the value of the left hand side with the type on the right. E.g.,</p>
<pre><code class="language-tla">v &lt;: T
</code></pre>
<p>means &quot;value <code>v</code> has type <code>T</code>&quot;.</p>
<p>However, other tools (such as TLC and TLAPS) have no support for these
annotations. To tell them to ignore type annotations, we maintain the convention
that any file using Apalache type annotations begins with the following definition:</p>
<pre><code class="language-tla">v &lt;: T == v
</code></pre>
<p>With this in place, Apalache can parse out the type annotations in the rest of
the file, but other tools are told to simply read any occurrence of <code>v &lt;: T</code> as
<code>v</code>, effectively erasing the type ascription.</p>
<p>Now we can help the type checker by rewriting the condition in <code>Next</code> as follows:</p>
<h4><a class="header" href="#example-of-using-type-annotations" id="example-of-using-type-annotations">Example of using type annotations</a></h4>
<pre><code class="language-tla">Next ==
    IF Left = {} &lt;: {Int}
    THEN ...
    ELSE ...
</code></pre>
<p>Now the type checker treats the expression <code>{}</code> as a set of integers. However,
it complains about another line:</p>
<pre><code>Step 0, level 0: checking if 1 transition(s) are enabled and violate the invariant I@15:43:35.932
Step 0, level 1: collecting 1 enabled transition(s)               I@15:43:35.977
Step 1, level 1: checking if 2 transition(s) are enabled and violate the invariant I@15:43:35.992
NeedForTypes.tla:23:24-23:40, x$1, type error: Expected type Unknown, found Int E@15:43:36.012
NeedForTypes.tla:23:24-23:40, Append(...), type error: Expected a type, found: None E@15:43:36.018
NeedForTypes.tla:23:11-24:31, /\(...), type error: Expected a Boolean, found: None E@15:43:36.020
The outcome is: Error
</code></pre>
<p>Here the type checker stumbles upon the sequence operator <code>Append(OutSeq, x)</code>
and complains about the type mismatch. Similar to <code>{}</code>, it has treated
the expression <code>&lt;&lt; &gt;&gt;</code> as a sequence of an unknown type. (In case of <code>&lt;&lt;1, 2&gt;&gt;</code>
it would be even worse, as the type checker would not know, whether <code>&lt;&lt;1, 2&gt;&gt;</code>
should be treated as a sequence or a tuple). Again, we help the type checker
by modifying <code>Init</code> as follows:</p>
<pre><code class="language-tla">Init ==
    /\ OutSeq = &lt;&lt; &gt;&gt; &lt;: Seq(Int)
    ...
</code></pre>
<p>Having these two annotations, the type checker stops complaining. You can find
the annotated specification in
<a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/NeedForTypesWithTypes.tla"><code>test/tla/NeedForTypesWithTypes.tla</code></a>.</p>
<h3><a class="header" href="#722--records-and-sets-of-records" id="722--records-and-sets-of-records">7.2.2  Records and sets of records</a></h3>
<p>Consider the following example in
<a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/Handshake.tla"><code>test/tla/Handshake.tla</code></a>:</p>
<pre><code class="language-tla">------------------------ MODULE Handshake ------------------------
(**
 * A TCP-like handshake protocol:
 * https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment
 *
 * Igor Konnov, 2020
 *)
EXTENDS Integers

VARIABLES msgs,     \* the set of all messages
          iseqno,   \* Initiator's sequence number
          rseqno,   \* Receiver's sequence number
          istate,   \* Initiator's state
          rstate    \* Receiver's state

a &lt;: b == a

Init ==
    /\ msgs = {}
    /\ iseqno = 0
    /\ rseqno = 0
    /\ istate = &quot;INIT&quot;
    /\ rstate = &quot;LISTEN&quot;

SendSyn ==
    /\ istate = &quot;INIT&quot;
    /\ \E no \in Nat:
        /\ msgs' = msgs \union {[syn |-&gt; TRUE,
                                 ack |-&gt; FALSE, seqno |-&gt; no]}
        /\ iseqno' = no + 1
        /\ istate' = &quot;SYN-SENT&quot;
        /\ UNCHANGED &lt;&lt;rseqno, rstate&gt;&gt;

SendSynAck ==
    /\ rstate = &quot;LISTEN&quot;
    /\ \E seqno, ackno \in Nat:
        /\ [syn |-&gt; TRUE, ack |-&gt; FALSE, seqno |-&gt; seqno] \in msgs
        /\ msgs' = msgs \union {[syn |-&gt; TRUE, ack |-&gt; TRUE,
                                 seqno |-&gt; seqno + 1,
                                 ackno |-&gt; ackno]}
        /\ rseqno' = ackno + 1
        /\ rstate' = &quot;SYN-RECEIVED&quot;
        /\ UNCHANGED &lt;&lt;iseqno, istate&gt;&gt;

SendAck ==
    /\ istate = &quot;SYN-SENT&quot;
    /\ \E ackno \in Nat:
        /\ [syn |-&gt; TRUE, ack |-&gt; TRUE,
            seqno |-&gt; iseqno, ackno |-&gt; ackno] \in msgs
        /\ istate' = &quot;ESTABLISHED&quot;
        /\ msgs' = msgs \union {[syn |-&gt; FALSE, ack |-&gt; TRUE,
                                 seqno |-&gt; iseqno,
                                 ackno |-&gt; ackno + 1]}
        /\ UNCHANGED &lt;&lt;iseqno, rseqno, rstate&gt;&gt;

RcvAck ==
    /\ rstate = &quot;SYN-RECEIVED&quot;
    /\ \E seqno \in Nat:
        /\ ([syn |-&gt; FALSE, ack |-&gt; TRUE,
             seqno |-&gt; seqno, ackno |-&gt; rseqno]) \in msgs
        /\ rstate' = &quot;ESTABLISHED&quot;
        /\ UNCHANGED &lt;&lt;msgs, iseqno, rseqno, istate&gt;&gt;


Next == SendSyn \/ SendSynAck \/ SendAck \/ RcvAck

Inv == (rstate = &quot;ESTABLISHED&quot; =&gt; istate = &quot;ESTABLISHED&quot;)
======================================================================
</code></pre>
<p>As we have seen before, the type checker complains about the set <code>msgs</code>,
which is initialized as <code>{}</code>. So we have to specify the type of <code>{}</code>. But which
type shall we use for the empty set?</p>
<p>In our example, the set <code>msgs</code> may contain records of three kinds:</p>
<ul>
<li>a <strong>SYN</strong> request that is modeled as a record
<code>[ack |-&gt; FALSE, syn |-&gt; TRUE, seqno |-&gt; i]</code> for some number <code>i</code>,</li>
<li>a <strong>SYN-ACK</strong> reply that is modeled as a record
<code>[ack |-&gt; TRUE, syn |-&gt; TRUE, seqno |-&gt; i, ackno |-&gt; j]</code>
for some numbers <code>i</code> and <code>j</code>,</li>
<li>an <strong>ACK</strong> reply that is modeled as a record
<code>[ack |-&gt; TRUE, syn |-&gt; FALSE, seqno |-&gt; i, ackno |-&gt; j]</code>
for some numbers <code>i</code> and <code>j</code>.</li>
</ul>
<p>From the perspective of the type checker, the three records shown above have
three different types. Although we would love to reject this example as an
ill-typed one, mixing records of different types is a widely-accepted idiom in
TLA+, for instance, see <a href="https://github.com/tlaplus/Examples/blob/master/specifications/Paxos/Paxos.tla">Lamport's specification of
Paxos</a>.
Think of records as of C unions, rather than C structs!</p>
<p>To help the type checker, we first introduce a handy operator for the type that
contains the fields of the three records:</p>
<pre><code class="language-tla">MT == [syn |-&gt; BOOLEAN, ack |-&gt; BOOLEAN, seqno |-&gt; Int, ackno |-&gt; Int]
</code></pre>
<p>Then we add annotations as follows:</p>
<pre><code class="language-tla">Init ==
  /\ msgs = {} &lt;: {MT}
    ...

SendSyn ==
  ...
  /\ \E no \in Nat:
    /\ msgs' = msgs \union {[syn |-&gt; TRUE, ack |-&gt; FALSE, seqno |-&gt; no] &lt;: MT}
  ...

SendSynAck ==
  ...
  /\ \E seqno, ackno \in Nat:
    /\ ([syn |-&gt; TRUE, ack |-&gt; FALSE, seqno |-&gt; seqno] &lt;: MT) \in msgs
    ...

SendAck ==
  ...
  /\ \E ackno \in Nat:
    ...
</code></pre>
<p>As you can see, we have to annotate only those records that do not have all
four fields of <code>MT</code>. As soon as we have added the annotations, the type checker
stopped complaining and let the model checker to run. The annotated code can be
found in
<a href="https://github.com/informalsystems/apalache/blob/unstable/test/tla/HandshakeWithTypes.tla"><code>test/tla/HandshakeWithTypes.tla</code></a>.</p>
<p>Type annotations can be also applied to sets of records. For example:</p>
<pre><code class="language-tla">[syn |-&gt; BOOLEAN, ack |-&gt; BOOLEAN, seqno |-&gt; Int] &lt;: {MT}
</code></pre>
<p>You can find more details on the simple type inference algorithm and the type
annotations in <a href="types-and-annotations.html">type annotations</a>.</p>
<h3><a class="header" href="#723--naturals" id="723--naturals">7.2.3  Naturals</a></h3>
<p>If you look carefully at the <a href="types-and-annotations.html">type annotations</a>, you
will find that there is no designated type for naturals. Indeed, one can just
use the type <code>Int</code>, whenever a natural number is required. If we introduced a
special type for naturals, that would cause a lot of confusion for the type
checker. What would be the type of the literal <code>42</code>? That depends on, whether
you extend <code>Naturals</code> or <code>Integers</code>. And if you extend <code>Naturals</code> and later
somebody else extends your module and also <code>Integers</code>, should be the type
of <code>42</code> be an integer?</p>
<p>Apalache still allows you to extend <code>Naturals</code>. However, it will treat all
number-like literals as integers. This is consistent with the view that the naturals are
a subset of the integers, and the integers are a subset of the reals.  Classically, one
would not define subtraction for naturals. However, the module <code>Naturals</code>
defines binary minus, which can easily drive a variable outside of <code>Nat</code>. For
instance, see the following example:</p>
<pre><code class="language-tla">----------------------------- MODULE NatCounter ------------------------        
EXTENDS Naturals

VARIABLE x

Init == x = 3

\* a natural counter can go below zero, and this is expected behavior
Next == x' = x - 1

Inv == x &gt;= 0
========================================================================
</code></pre>
<p>Given that you will need the value <code>Int</code> for a type annotation, it probably
does not make a lot of sense to extend <code>Naturals</code> in your own specifications,
as you will have to extend <code>Integers</code> for the type annotation too.  We are
currently working on a different kind of type annotations, which would not
require <code>Int</code>.</p>
<p><a name="recursion"></a></p>
<h2><a class="header" href="#73-recursive-operators-and-functions" id="73-recursive-operators-and-functions">7.3 Recursive operators and functions</a></h2>
<p><a name="rec-op"></a></p>
<h3><a class="header" href="#731-recursive-operators" id="731-recursive-operators">7.3.1 Recursive operators</a></h3>
<p>In the preprocessing phase, Apalache replaces every application of a user
operator with its body. We call this process &quot;operator inlining&quot;.
This cannot be done for recursive operators, for two reasons:</p>
<ol>
<li>
<p>A recursive operator may be non-terminating (although a non-terminating
operator is useless in TLA+);</p>
</li>
<li>
<p>A terminating call to an operator may take an unpredicted number of iterations.</p>
</li>
</ol>
<p>However, in practice, when one fixes specification parameters (that is,
<code>CONSTANTS</code>), it is usually easy to find a bound on the number of operator
iterations. For instance, consider the following specification:</p>
<pre><code class="language-tla">--------- MODULE Rec6 -----------------
CONSTANTS N
VARIABLES set, count

RECURSIVE Sum(_)

Sum(S) ==
  IF S = {}
  THEN 0
  ELSE LET x == CHOOSE x \in S: TRUE IN
    x + Sum(S \ {x})

Init ==
  /\ set = {}
  /\ count = 0

Next ==
  \E x \in (1..N) \ set:
    /\ count' = count + x
    /\ set' = set \union {x}

Inv == count = Sum(set)
=======================================
</code></pre>
<p>It is clear that the expression <code>Sum(S)</code> requires the number of iterations that
is equal to <code>Cardinality(S) + 1</code>. Moreover, the expression <code>set \subseteq 1..N</code> is an invariant, and thus every call <code>Sum(set)</code> requires up to <code>N+1</code>
iterations.</p>
<p>When we can find an upper bound on the number of iterations, Apalache can
unroll the recursive operator up to this bound. To this end, we define two
additional operators. For instance:</p>
<pre><code class="language-tla">--------- MC_Rec6 ----------
VARIABLES set, count

INSTANCE Rec6 WITH N &lt;- 3

UNROLL_TIMES_Sum == 4
UNROLL_DEFAULT_Sum == 0
============================
</code></pre>
<p>In this case, Apalache unrolls every call to <code>Sum</code> exactly <code>UNROLL_TIMES_Sum</code>
times, that is, four times. On the default branch, Apalache places
<code>UNROLL_DEFAULT_Sum</code>, that is, 0.</p>
<p>All recursively defined operators should follow this convention where, for every such operator <code>Oper</code>, the user defines both <code>UNROLL_TIMES_Oper</code>, which expands to a positive integer value, and <code>UNROLL_DEFAULT_Oper</code>, which expands to some default value <code>Oper(args*)</code> should take, if the computation would require more than <code>UNROLL_TIMES_Oper</code> recursive calls.
At present, we only support literals (e.g. <code>4</code>) or primitive arithmetic expressions (e.g. <code>2 + 2</code>) in the body of <code>UNROLL_TIMES_Oper</code>.</p>
<p><a name="rec-fun"></a></p>
<h4><a class="header" href="#732-recursive-functions" id="732-recursive-functions">7.3.2 Recursive functions</a></h4>
<p>Apalache offers limited support for recursive functions. However, read the
warning below on why you should not use recursive functions. The restrictions
are as follows:</p>
<ol>
<li>
<p>Apalache supports recursive functions that return an integer or a Boolean.</p>
</li>
<li>
<p>As Apalache's simple type checker is not able to find the type of a
recursive function, all uses of a recursive function should come with a type
annotation.</p>
</li>
<li>
<p>As in TLC, the function domain must be a finite set.</p>
</li>
</ol>
<p>The example below shows a recursive function that computes the factorial of <code>n</code>.</p>
<pre><code class="language-tla">------------------------------ MODULE Rec8 ------------------------------------
EXTENDS Integers

VARIABLES n, factSpec, factComp

\* the syntax for type annotations
a &lt;: b == a

\* the type of the factorial function
FactT == [Int -&gt; Int]

(*
 Defining a recursive function on a finite domain. Although it is rather
 unnatural to define factorial on a finite set, both Apalache and TLC
 require finite domains. As is usual for function application, the result
 of the application is not defined on the elements outside of the function
 domain.
 *)
Fact[k \in 1..20] ==
    IF k &lt;= 1
    THEN 1
    ELSE k * (Fact &lt;: FactT)[k - 1]

Init ==
    /\ n = 1
    /\ factSpec = Fact[n]
    /\ factComp = 1

Next ==
    /\ n' = n + 1
    /\ factSpec' = Fact[n']
    /\ factComp' = n' * factComp

Inv ==
    factComp = factSpec
===============================================================================
</code></pre>
<p>Check other examples in
<a href="https://github.com/informalsystems/apalache/tree/unstable/test/tla"><code>test/tla</code></a> that
start with the prefix <code>Rec</code>.</p>
<p><strong>Why you should avoid recursive functions.</strong> Sometimes, recursive functions
concisely describe the function that you need. The nice examples are the
factorial function (see above) and Fibonacci numbers (see
<a href="https://github.com/informalsystems/apalache/tree/unstable/test/tla/Rec3.tla">Rec3</a>).
However, when you define a recursive function over sets, the complexity gets
ugly really fast.</p>
<p>Consider the example
<a href="https://github.com/informalsystems/apalache/tree/unstable/test/tla/Rec9.tla">Rec9</a>,
which computes set cardinality. Here is a fragment of the spec:</p>
<pre><code class="language-tla">\* the type of the function Card
CardT == [{Int} -&gt; Int]

\* The set cardinality function
Card[S \in SUBSET NUMS] ==
    IF S = IntSet({})
    THEN 0
    ELSE LET i == CHOOSE j \in S: TRUE IN
        1 + (Card &lt;: CardT)[S \ {i}]
</code></pre>
<p>Since we cannot fix the order, in which the set elements are evaluated, we
define function <code>Card</code> over <code>SUBSET NUMS</code>, that is, all possible subsets of
<code>NUMS</code>. Apalache translates the function in a quantifier-free theory of SMT.
Hence, in this case, Apalache expands <code>SUBSET NUMS</code>, so it introduces
<code>2^|NUMS|</code> sets! Further, Apalache writes down the SMT constraints for the
domain of <code>Card</code>. As a result, it produces <code>NUMS * 2^|NUMS|</code> constraints.
As you can see, recursive functions over sets explode quite fast.</p>
<p>It is usually a good idea to use recursive operators over sets rather than
recursive functions. The downside is that you have to provide an upper bound on
the number of the operator iterations. The upside is that recursive operators
are usually unrolled more efficiently. (If they contain only constant
expressions, they are even computed by the translator!) For instance, set
cardinality does not require <code>2^|NUMS|</code> constraints, when using a recursive
operator.</p>
<p><a name="apalacheMod"></a></p>
<h1><a class="header" href="#9-the-apalache-module" id="9-the-apalache-module">9. The Apalache module</a></h1>
<p>Similar to the <code>TLC</code> module, we provide the module called <code>Apalache</code>, which can
be found in
<a href="https://github.com/informalsystems/apalache/tree/unstable/src/tla">src/tla</a>.
Most of the operators in that modules are introduced internally by Apalache,
when it is rewriting a TLA+ specification.  It is useful to read the comments
to the operators defined in <code>Apalache.tla</code>, as they will help you in
understanding the <a href="#detailed">detailed output</a> produced by the tool, see.
Perhaps, the most interesting operator in <code>Apalache</code> is the type assignment
operator that is defined as follows:</p>
<pre><code class="language-tla">x := e == x = e
</code></pre>
<p>See the <a href="#assignments">discussion</a> on the role of assignments in Apalache.</p>
<p><a name="profiling"></a></p>
<h1><a class="header" href="#10-profiling-your-specification" id="10-profiling-your-specification">10. Profiling your specification</a></h1>
<p>As Apalache translates the TLA+ specification to SMT, it often defeats
our intuition about the standard bottlenecks that one learns about when running
TLC. For instance, whereas TLC needs a lot of time to compute the initial states
for the following specification, Apalache can check the executions of length up
to ten steps in seconds:</p>
<pre><code class="language-tla">---------------------------- MODULE powerset ----------------------------
EXTENDS Integers
VARIABLE S

Init ==
    /\ S \in SUBSET (1..50)
    /\ 3 \notin S

Next ==
    \/ \E x \in S:
        S' = S \ {x}
    \/ UNCHANGED S

Inv ==
    3 \notin S
=========================================================================
</code></pre>
<p>Apalache has its own bottlenecks. As it's using the SMT solver z3,
we cannot precisely profile your TLA+ specification. However, we can profile
the number of SMT variables and constraints that Apalache produces for different
parts of your specification. To activate this profiling mode, use the option
<code>--smtprof</code>:</p>
<pre><code class="language-sh">apalache check --smtprof powerset.tla
</code></pre>
<p>The profiling data is written in the file <code>profiler.csv</code>:</p>
<pre><code># weight,nCells,nConsts,nSmtExprs,location                                      
4424,2180,2076,28460,powerset.tla:11:5-13:18
4098,2020,1969,12000,powerset.tla:12:9-12:20
4098,2020,1969,12000,powerset.tla:12:14-12:20 
...
</code></pre>
<p>The meaning of the columns is as follows:</p>
<ul>
<li>
<p><code>weight</code> is the weight of the expression.
Currently it is computed as <code>nCells + nConsts + sqrt(nSmtExprs)</code>.
We may change this formula in the future.</p>
</li>
<li>
<p><code>nCells</code> is the number of arena cells that are created during the translation.
Intuitively, the cells are used to keep the potential shapes of the data structures
that are captured by the expression.</p>
</li>
<li>
<p><code>nConsts</code> is the number of SMT constants that are produced by the translator.</p>
</li>
<li>
<p><code>nSmtExprs</code> is the number of SMT expressions that are produced by the translator.
We also include all subexpressions, when counting this metric.</p>
</li>
<li>
<p><code>location</code> is the location in the source code where the expression
was found, indicated by the file name correlated with a range of <code>line:column</code> pairs.</p>
</li>
</ul>
<p>To visualize the profiling data, you can use the script <code>script/heatmap.py</code>:</p>
<pre><code class="language-sh">$APALACHE_HOME/script/heatmap.py profile.csv heatmap.html
</code></pre>
<p>The produced file <code>heatmap.html</code> looks as follows:</p>
<p><img src="./img/profiler2.png" alt="Here you should see a heatmap" title="A heatmap" /></p>
<p>The heatmap may give you an idea about the expression that are hard for Apalache.
The following picture highlights one part of the Raft specification that produces
a lot of constraints:</p>
<p><img src="./img/profiler.png" alt="Here you should see a heatmap" title="A heatmap of Raft" /></p>
<p><a name="theory5"></a></p>
<h1><a class="header" href="#11-five-minutes-of-theory" id="11-five-minutes-of-theory">11. Five minutes of theory</a></h1>
<p><strong>You can safely skip this section</strong></p>
<p>Given a TLA+ specification, with all parameters fixed, our model checker
performs the following steps:</p>
<ol>
<li>
<p>It automatically extracts symbolic transitions from the specification. This
allows us to partition the action <code>Next</code> into a disjunction of simpler actions
<code>A_1, ..., A_n</code>.</p>
</li>
<li>
<p>Apalache translates operators <code>Init</code> and <code>A_1, ..., A_n</code> to SMT formulas.
This allows us to explore bounded executions with an SMT solver (we are using
<a href="https://github.com/Z3Prover/z3">Microsoft's Z3</a>). For instance, a sequence of
<code>k</code> steps <code>s_0, s_1, ..., s_k</code>, all of which execute action <code>A_1</code>, is encoded
as a formula <code>Run(k)</code> that looks as follows:</p>
</li>
</ol>
<pre><code class="language-tla">[[Init(s_0)]] /\ [[A_1(s_0, s_1)]] /\ ... /\ [[A_1(s_(k-1), s_k)]]
</code></pre>
<p>To find an execution of length <code>k</code> that violates an invariant <code>Inv</code>, the tool
adds the following constraint to the formula <code>Run(k)</code>:</p>
<pre><code class="language-tla">[[~Inv(s_0)]] \/ ... \/ [[~Inv(s_k)]]
</code></pre>
<p>Here, <code>[[_]]</code> is the translator from TLA+ to SMT. Importantly, the values for
the states <code>s_0</code>, ..., <code>s_k</code> are not enumerated as in TLC, but have to be found
by the SMT solver.</p>
<p>If you would like to learn more about theory behind Apalache, check the <a href="https://dl.acm.org/doi/10.1145/3360549">paper
delivered at OOPSLA19</a>.</p>
<p><a name="features"></a></p>
<h1><a class="header" href="#12-supported-language-features" id="12-supported-language-features">12. Supported language features</a></h1>
<p>Check the <a href="features.html">supported features</a>, <a href="kera.html">KerA+</a>, and
<a href="preprocessing.html">preprocessing steps</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="tlc-config.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="tlc-config.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
