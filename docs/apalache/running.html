<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Running the Tool - Apalache Documentation</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="../tutorials/index.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../tutorials/entry-tutorial.html"><strong aria-hidden="true">2.</strong> Entry-level Model Checker Tutorial</a></li><li class="chapter-item expanded "><a href="../tutorials/snowcat-tutorial.html"><strong aria-hidden="true">3.</strong> Type Checker Tutorial</a></li><li class="chapter-item expanded "><a href="../tutorials/pluscal-tutorial.html"><strong aria-hidden="true">4.</strong> Checking Pluscal specifications</a></li><li class="chapter-item expanded "><a href="../tutorials/trail-tips.html"><strong aria-hidden="true">5.</strong> Apalache trail tips: how to check your specs faster</a></li><li class="chapter-item expanded "><a href="../tutorials/symbmc.html"><strong aria-hidden="true">6.</strong> Symbolic Model Checking</a></li><li class="chapter-item expanded "><a href="../tutorials/temporal-properties.html"><strong aria-hidden="true">7.</strong> Specifying temporal properties and understanding counterexamples</a></li><li class="chapter-item expanded affix "><li class="part-title">HOWTOs</li><li class="chapter-item expanded "><a href="../HOWTOs/index.html"><strong aria-hidden="true">8.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../HOWTOs/howto-write-type-annotations.html"><strong aria-hidden="true">9.</strong> How to write type annotations</a></li><li class="chapter-item expanded "><a href="../HOWTOs/uninterpretedTypes.html"><strong aria-hidden="true">10.</strong> How to use uninterpreted types</a></li><li class="chapter-item expanded affix "><li class="part-title">Apalache User Manual</li><li class="chapter-item expanded "><a href="../apalache/index.html"><strong aria-hidden="true">11.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../apalache/installation/index.html"><strong aria-hidden="true">11.1.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../apalache/installation/jvm.html"><strong aria-hidden="true">11.1.1.</strong> Prebuilt Packages</a></li><li class="chapter-item expanded "><a href="../apalache/installation/docker.html"><strong aria-hidden="true">11.1.2.</strong> Docker</a></li><li class="chapter-item expanded "><a href="../apalache/installation/source.html"><strong aria-hidden="true">11.1.3.</strong> Build from Source</a></li></ol></li><li class="chapter-item expanded "><a href="../apalache/running.html" class="active"><strong aria-hidden="true">11.2.</strong> Running the Tool</a></li><li class="chapter-item expanded "><a href="../apalache/example.html"><strong aria-hidden="true">11.3.</strong> An Example TLA+ Specification</a></li><li class="chapter-item expanded "><a href="../apalache/parameters.html"><strong aria-hidden="true">11.4.</strong> Specification Parameters</a></li><li class="chapter-item expanded "><a href="../apalache/principles/index.html"><strong aria-hidden="true">11.5.</strong> Symbolic Model Checking with Apalache</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../apalache/principles/assignments.html"><strong aria-hidden="true">11.5.1.</strong> Assignments and symbolic transitions</a></li><li class="chapter-item expanded "><a href="../apalache/principles/folds.html"><strong aria-hidden="true">11.5.2.</strong> Folding sets and sequences</a></li><li class="chapter-item expanded "><a href="../apalache/principles/invariants.html"><strong aria-hidden="true">11.5.3.</strong> Invariants: State, Action, Trace</a></li><li class="chapter-item expanded "><a href="../apalache/principles/enumeration.html"><strong aria-hidden="true">11.5.4.</strong> Enumeration of counterexamples</a></li><li class="chapter-item expanded "><a href="../apalache/principles/apalache-mod.html"><strong aria-hidden="true">11.5.5.</strong> The Apalache Module</a></li><li class="chapter-item expanded "><a href="../apalache/principles/naturals.html"><strong aria-hidden="true">11.5.6.</strong> Naturals</a></li></ol></li><li class="chapter-item expanded "><a href="../apalache/config.html"><strong aria-hidden="true">11.6.</strong> Apalache global configuration file</a></li><li class="chapter-item expanded "><a href="../apalache/statistics.html"><strong aria-hidden="true">11.7.</strong> TLA+ Execution Statistics</a></li><li class="chapter-item expanded "><a href="../apalache/profiling.html"><strong aria-hidden="true">11.8.</strong> Profiling Your Specification</a></li><li class="chapter-item expanded "><a href="../apalache/theory.html"><strong aria-hidden="true">11.9.</strong> Five minutes of theory</a></li></ol></li><li class="chapter-item expanded "><a href="../apalache/tuning.html"><strong aria-hidden="true">12.</strong> Fine Tuning</a></li><li class="chapter-item expanded "><a href="../apalache/tlc-config.html"><strong aria-hidden="true">13.</strong> TLC Configuration Files</a></li><li class="chapter-item expanded "><a href="../apalache/typechecker-snowcat.html"><strong aria-hidden="true">14.</strong> The Snowcat Type Checker</a></li><li class="chapter-item expanded "><a href="../apalache/features.html"><strong aria-hidden="true">15.</strong> Supported Features</a></li><li class="chapter-item expanded "><a href="../apalache/principles/recursive.html"><strong aria-hidden="true">16.</strong> Obsolete: Recursive operators and functions</a></li><li class="chapter-item expanded "><a href="../apalache/known-issues.html"><strong aria-hidden="true">17.</strong> Known Issues</a></li><li class="chapter-item expanded "><a href="../apalache/antipatterns.html"><strong aria-hidden="true">18.</strong> Antipatterns</a></li><li class="chapter-item expanded "><a href="../apalache/preprocessing.html"><strong aria-hidden="true">19.</strong> TLA+ Preprocessing</a></li><li class="chapter-item expanded "><a href="../apalache/assignments-in-depth.html"><strong aria-hidden="true">20.</strong> Assignments and Symbolic Transitions in Depth</a></li><li class="chapter-item expanded "><a href="../apalache/kera.html"><strong aria-hidden="true">21.</strong> KerA: kernel logic of actions</a></li><li class="chapter-item expanded affix "><li class="part-title">TLA+ Language Manual for Engineers</li><li class="chapter-item expanded "><a href="../lang/index.html"><strong aria-hidden="true">22.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../lang/standard-operators.html"><strong aria-hidden="true">23.</strong> The standard operators of TLA+</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../lang/booleans.html"><strong aria-hidden="true">23.1.</strong> Booleans</a></li><li class="chapter-item expanded "><a href="../lang/control-and-nondeterminism.html"><strong aria-hidden="true">23.2.</strong> Control And Nondeterminism</a></li><li class="chapter-item expanded "><a href="../lang/conditionals.html"><strong aria-hidden="true">23.3.</strong> Conditionals</a></li><li class="chapter-item expanded "><a href="../lang/integers.html"><strong aria-hidden="true">23.4.</strong> Integers</a></li><li class="chapter-item expanded "><a href="../lang/sets.html"><strong aria-hidden="true">23.5.</strong> Sets</a></li><li class="chapter-item expanded "><a href="../lang/logic.html"><strong aria-hidden="true">23.6.</strong> Logic</a></li><li class="chapter-item expanded "><a href="../lang/functions.html"><strong aria-hidden="true">23.7.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../lang/records.html"><strong aria-hidden="true">23.8.</strong> Records</a></li><li class="chapter-item expanded "><a href="../lang/tuples.html"><strong aria-hidden="true">23.9.</strong> Tuples</a></li><li class="chapter-item expanded "><a href="../lang/sequences.html"><strong aria-hidden="true">23.10.</strong> Sequences</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">23.11.</strong> Bags</div></li></ol></li><li class="chapter-item expanded "><a href="../lang/apalache-extensions.html"><strong aria-hidden="true">24.</strong> Apalache extensions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../lang/apalache-operators.html"><strong aria-hidden="true">24.1.</strong> Apalache module</a></li><li class="chapter-item expanded "><a href="../lang/variants.html"><strong aria-hidden="true">24.2.</strong> Variants</a></li><li class="chapter-item expanded "><a href="../lang/option-types.html"><strong aria-hidden="true">24.3.</strong> Option types</a></li></ol></li><li class="chapter-item expanded "><a href="../lang/user-operators.html"><strong aria-hidden="true">25.</strong> User-defined operators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../lang/user/top-level-operators.html"><strong aria-hidden="true">25.1.</strong> Top-level operator definitions</a></li><li class="chapter-item expanded "><a href="../lang/user/let-in.html"><strong aria-hidden="true">25.2.</strong> LET-IN definitions</a></li><li class="chapter-item expanded "><a href="../lang/user/higher-order-operators.html"><strong aria-hidden="true">25.3.</strong> Higher-order operators definitions</a></li><li class="chapter-item expanded "><a href="../lang/user/lambdas.html"><strong aria-hidden="true">25.4.</strong> Anonymous operator definitions</a></li><li class="chapter-item expanded "><a href="../lang/user/local-operators.html"><strong aria-hidden="true">25.5.</strong> Local operator definitions</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">26.</strong> Modules, Extends, and Instances</div></li><li class="chapter-item expanded affix "><li class="part-title">Idiomatic TLA+</li><li class="chapter-item expanded "><a href="../idiomatic/index.html"><strong aria-hidden="true">27.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../idiomatic/000keep-minimum-state-variables.html"><strong aria-hidden="true">28.</strong> Keep state variables to the minimum</a></li><li class="chapter-item expanded "><a href="../idiomatic/001assignments.html"><strong aria-hidden="true">29.</strong> Update state variables with assignments</a></li><li class="chapter-item expanded "><a href="../idiomatic/002primes.html"><strong aria-hidden="true">30.</strong> Apply primes only to state variables</a></li><li class="chapter-item expanded "><a href="../idiomatic/007if-then-else.html"><strong aria-hidden="true">31.</strong> Use Boolean operators in actions, not IF-THEN-ELSE</a></li><li class="chapter-item expanded "><a href="../idiomatic/003record-sets.html"><strong aria-hidden="true">32.</strong> Avoid sets of mixed records</a></li><li class="chapter-item expanded affix "><li class="part-title">Design Documents</li><li class="chapter-item expanded "><a href="../adr/001rfc-types.html"><strong aria-hidden="true">33.</strong> RFC 001: types and type annotations</a></li><li class="chapter-item expanded "><a href="../adr/002adr-types.html"><strong aria-hidden="true">34.</strong> ADR-002: types and type annotations</a></li><li class="chapter-item expanded "><a href="../adr/003adr-trex.html"><strong aria-hidden="true">35.</strong> ADR-003: transition executor (TRex)</a></li><li class="chapter-item expanded "><a href="../adr/004adr-annotations.html"><strong aria-hidden="true">36.</strong> ADR-004: code annotations</a></li><li class="chapter-item expanded "><a href="../adr/005adr-json.html"><strong aria-hidden="true">37.</strong> ADR-005: JSON Serialization Format</a></li><li class="chapter-item expanded "><a href="../adr/006rfc-unit-testing.html"><strong aria-hidden="true">38.</strong> RFC-006: unit tests and property-based tests</a></li><li class="chapter-item expanded "><a href="../adr/007adr-restructuring.html"><strong aria-hidden="true">39.</strong> ADR-007: restructuring</a></li><li class="chapter-item expanded "><a href="../adr/008adr-exceptions.html"><strong aria-hidden="true">40.</strong> ADR-008: exceptions</a></li><li class="chapter-item expanded "><a href="../adr/009adr-outputs.html"><strong aria-hidden="true">41.</strong> ADR-009: outputs</a></li><li class="chapter-item expanded "><a href="../adr/010rfc-transition-explorer.html"><strong aria-hidden="true">42.</strong> RFC-010: Implementation of Transition Exploration Server</a></li><li class="chapter-item expanded "><a href="../adr/011adr-smt-arrays.html"><strong aria-hidden="true">43.</strong> ADR-011: alternative SMT encoding using arrays</a></li><li class="chapter-item expanded "><a href="../adr/012adr-adopt-adr-template.html"><strong aria-hidden="true">44.</strong> ADR-012: Adopt an ADR Template</a></li><li class="chapter-item expanded "><a href="../adr/013adr-configuration.html"><strong aria-hidden="true">45.</strong> ADR-013: Configuration Management Component</a></li><li class="chapter-item expanded "><a href="../adr/014adr-precise-records.html"><strong aria-hidden="true">46.</strong> ADR-014: Precise type inference for records and variants</a></li><li class="chapter-item expanded "><a href="../adr/015adr-trace.html"><strong aria-hidden="true">47.</strong> ADR-015: ITF: informal trace format</a></li><li class="chapter-item expanded "><a href="../adr/016adr-retla.html"><strong aria-hidden="true">48.</strong> ADR-016: ReTLA: Relational TLA</a></li><li class="chapter-item expanded "><a href="../adr/017pdr-temporal.html"><strong aria-hidden="true">49.</strong> PDR-017: Checking temporal properties</a></li><li class="chapter-item expanded "><a href="../adr/018adr-inlining.html"><strong aria-hidden="true">50.</strong> ADR-018: Inlining in Apalache</a></li><li class="chapter-item expanded "><a href="../adr/019adr-harmonize-changelog.html"><strong aria-hidden="true">51.</strong> ADR-019: Harmonize changelog management</a></li><li class="chapter-item expanded "><a href="../adr/020adr-arenas.html"><strong aria-hidden="true">52.</strong> ADR-020: Improving membership in arenas</a></li><li class="chapter-item expanded "><a href="../adr/021rfc-prioritization.html"><strong aria-hidden="true">53.</strong> RFC-021: Prioritization of Work</a></li><li class="chapter-item expanded "><a href="../adr/022adr-unification-of-configs-and-options.html"><strong aria-hidden="true">54.</strong> ADR-022: Unify Configuration Management and &quot;Pass Options&quot;</a></li><li class="chapter-item expanded "><a href="../adr/023adr-trace-evaluation.html"><strong aria-hidden="true">55.</strong> ADR-023: Trace evaluation</a></li><li class="chapter-item expanded "><a href="../adr/024adr-arena-pass.html"><strong aria-hidden="true">56.</strong> ADR-024: Arena computation isolation</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Apalache Documentation</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/informalsystems/apalache" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#running-the-tool" id="running-the-tool">Running the Tool</a></h1>
<p><strong>Opt-in statistics programme</strong>: if you opt in for statistics collection (off by default),
then every run of Apalache will submit anonymized statistics to
<code>tlapl.us</code>. See the details in <a href="./statistics.html">TLA+ Anonymized Execution Statistics</a>.</p>
<p>Apalache supports several modes of execution. You can run it with the <code>--help</code> option,
to see the complete list of modes and their invocation commands:</p>
<pre><code class="language-bash">$ apalache-mc --help
</code></pre>
<p>The most important commands are as follows:</p>
<ul>
<li>
<p><code>parse</code> reads a TLA+ specification with the SANY parser and flattens it by
instantiating all modules. It terminates successfully if there are no parse
errors. The input specification to <code>parse</code> may be given in standard TLA+ format, or in the <a href="../adr/005adr-json.html">JSON serialization
format</a>, while the outputs are produced in both formats.</p>
</li>
<li>
<p><code>typecheck</code> performs all of the operations of <code>parse</code> and additionally runs the type checker Snowcat to infer
the types of all expressions in the parsed specification. It terminates successfully if there are no type errors.</p>
</li>
<li>
<p><code>simulate</code> performs all of the operations of <code>typecheck</code> and additionally runs the model checker in simulation mode,
which <em>randomly</em> picks a sequence of <a href="https://apalache-mc.org/docs/apalache/assignments-in-depth.html#slices">actions</a>
and checks the invariants for the subset of all executions which only admit actions in the selected order. 
It terminates successfully if there are no invariant violations. 
This command usually checks randomized symbolic runs much faster than the <code>check</code> command.</p>
</li>
<li>
<p><code>check</code> performs all of the operations of <code>typecheck</code> and then runs the model checker in bounded model checking mode,
which checks invariants for <em>all executions</em>,
the length of which does not exceed the value specified by the <code>--length</code> parameter. 
It terminates successfully if there are no invariant violations.</p>
</li>
<li>
<p><code>test</code> performs all of the operations of <code>check</code> in a mode that is designed to <a href="https://apalache-mc.org/docs/adr/006rfc-unit-testing.html#32-testing-actions">test a single action</a>.</p>
</li>
</ul>
<h2><a class="header" href="#1-model-checker-and-simulator-command-line-parameters" id="1-model-checker-and-simulator-command-line-parameters">1. Model checker and simulator command-line parameters</a></h2>
<h3><a class="header" href="#11-model-checker-command-line-parameters" id="11-model-checker-command-line-parameters">1.1. Model checker command-line parameters</a></h3>
<p>The model checker can be run as follows:</p>
<pre><code class="language-bash">$ apalache-mc check [--config=filename] [--init=Init] [--cinit=ConstInit] \
    [--next=Next] [--inv=Inv1,...,Invn] [--length=10] \
    [--temporal=TemporalProp1,...,TemporalPropn] \
    [--algo=(incremental|offline)] \
    [--discard-disabled] [--no-deadlock] \
    [--tuning-options-file=filename] [--tuning-options=key1=val1:...:keyn=valn] \
    [--smt-encoding=(oopsla19|arrays)] \
    [--out-dir=./path/to/dir] \
    [--write-intermediate=(true|false)] \
    [--config-file=./path/to/file] \
    [--profiling=false] \
    [--output-traces=false] \
    &lt;myspec&gt;.tla
</code></pre>
<p>The arguments are as follows:</p>
<ul>
<li>
<p>General parameters:</p>
<ul>
<li><code>--config</code> specifies the <a href="./tlc-config.html">TLC configuration file</a></li>
<li><code>--init</code> specifies the initialization predicate, <em><code>Init</code> by default</em></li>
<li><code>--next</code> specifies the transition predicate, <em><code>Next</code> by default</em></li>
<li><code>--cinit</code> specifies the constant initialization predicate, <em>optional</em></li>
<li><code>--inv</code> specifies the invariants to check, as a comma separated list, <em>optional</em></li>
<li><code>--length</code> specifies the maximal number of <code>Next</code> steps, <em>10 by default</em></li>
<li><code>--temporal</code> specifies the temporal properties to check, as a comma
separated list, <em>optional</em></li>
</ul>
</li>
<li>
<p>Advanced parameters:</p>
<ul>
<li><code>--algo</code> lets you to choose the search algorithm: <code>incremental</code> is using the incremental SMT solver, <code>offline</code> is
using the non-incremental
(offline) SMT solver</li>
<li><code>--smt-encoding</code> lets you choose how the SMT instances are encoded: <code>oopsla19</code> (default) uses QF_UFNIA, and
<code>arrays</code> (experimental) and <code>funArrays</code> (experimental) use SMT arrays with extensionality. This parameter can also
be set via the <code>SMT_ENCODING</code> environment variable. See the <a href="../adr/011adr-smt-arrays.html">alternative SMT encoding using arrays</a> for details.</li>
<li><code>--discard-disabled</code> does a pre-check on transitions and discard the disabled ones at every step. If you know that
many transitions are always enabled, set it to false. Sometimes, this pre-check may be slower than checking the
invariant. Default: true.</li>
<li><code>--max-error &lt;n&gt;</code> instructs the search to stop after <code>n</code> errors, see <a href="./principles/enumeration.html">Enumeration of counterexamples</a>. Default: 1.</li>
<li><code>--view &lt;name&gt;</code> sets the state view to <code>&lt;name&gt;</code>, see <a href="./principles/enumeration.html">Enumeration of counterexamples</a>.</li>
<li><code>--no-deadlock</code> disables deadlock-checking, when <code>--discard-disabled=false</code> is on. When <code>--discard-disabled=true</code>,
deadlocks are found in any case.</li>
<li><code>--tuning-options-file</code> specifies a properties file that stores options for
<a href="tuning.html">fine-tuning</a></li>
<li><code>--tuning-options</code> can pass and/or override these <a href="tuning.html">fine-tuning</a>
options on the command line</li>
<li><code>--out-dir</code> set location for outputting any generated logs or artifacts,
<em><code>./_apalache-out</code> by default</em></li>
<li><code>--write-intermediate</code> if <code>true</code>, then additional output is generated. See
<a href="#detailed-output">Detailed output</a>. <em><code>false</code> by default</em></li>
<li><code>--run-dir=DIRECTORY</code> write all outputs directly into the specified
<code>DIRECTORY</code></li>
<li><code>--config-file</code> a file to use for loading configuration parameters. This
will prevent Apalache from looking for any local <code>.apalache.cfg</code> file.</li>
<li><code>--profiling</code> (Bool): This flag governs the creation of <code>profile-rules.txt</code>
used in <a href="profiling.html">profiling</a>. The file is only created if <code>profiling</code>
is set to <code>True</code>.  Setting <code>profiling</code> to <code>False</code> is incompatible with the
<code>--smtprof</code> flag. The default is <code>False</code>.</li>
<li><code>--output-traces</code>: save an example trace for each symbolic run, default: <code>false</code></li>
</ul>
</li>
</ul>
<p>Options passed with <code>--tuning-options</code> have priority over options passed with <code>--tuning-options-file</code>.</p>
<p>If an initialization predicate, transition predicate, or invariant is specified both in the configuration file, and on
the command line, the command line parameters take precedence over those in the configuration file.</p>
<p>In case conflicting arguments are passed for the same parameter, the following precedence order is followed:</p>
<ol>
<li>Command-line value</li>
<li>Environment variable value</li>
<li>Configuration file value</li>
</ol>
<h3><a class="header" href="#12-simulator-command-line-parameters" id="12-simulator-command-line-parameters">1.2. Simulator command-line parameters</a></h3>
<p>The simulator can be run as follows:</p>
<pre><code class="language-bash">$ apalache-mc simulate
    [all-checker-options] [--max-run=NUM] &lt;myspec&gt;.tla
</code></pre>
<p>The arguments are as follows:</p>
<ul>
<li>
<p>Special parameters:</p>
<ul>
<li><code>--max-run=NUM</code>: but produce up to <code>NUM</code> simulation runs (unless <code>--max-error</code> errors have been found), default: <code>100</code></li>
</ul>
</li>
</ul>
<h3><a class="header" href="#13-supplying-jvm-arguments" id="13-supplying-jvm-arguments">1.3. Supplying JVM arguments</a></h3>
<p>You can supply JVM argument to be used when running Apalache by setting the
environment variable <code>JVM_ARGS</code>. For example, to change the JVM heap size from
the default (<code>4096m</code>) to <code>1G</code> invoke Apalache as follows:</p>
<pre><code class="language-sh">JVM_ARGS=&quot;-Xmx1G&quot; apalache-mc &lt;args&gt;
</code></pre>
<p>If you are running Apalache via docker directly (instead of using the script in
<code>$APALACHE_HOME/script/run-docker.sh</code>), you'll also need to expose the
environment variable to the docker container:</p>
<pre><code class="language-sh">$ JVM_ARGS=&quot;-Xmx1G&quot; docker run -e JVM_ARGS --rm -v &lt;your-spec-directory&gt;:/var/apalache ghcr.io/informalsystems/apalache &lt;args&gt;
</code></pre>
<p>To track memory usage with: <code>jcmd &lt;pid&gt; VM.native_memory summary</code>, you can set</p>
<pre><code>JVM_ARGS=&quot;-XX:NativeMemoryTracking=summary&quot;
</code></pre>
<h3><a class="header" href="#14-bounded-model-checking" id="14-bounded-model-checking">1.4. Bounded model checking</a></h3>
<p>By default, Apalache performs <em>bounded model checking</em>, that is, it encodes a
symbolic execution of length <code>k</code> and a violation of a state invariant in SMT:</p>
<pre><code class="language-tla">/\ Init[v_0/v]
/\ Next[v_0/v, v_1/v'] /\ Next[v_1/v, v_2/v'] /\ ... /\ Next[v_{k-1}/v, v_k/v']
/\ ~Inv[v_0/v] \/ ~Inv[v_1/v] \/ ... \/ ~Inv[v_k/v]
</code></pre>
<p>Here an expression <code>Inv[v_i/v]</code> means that the state variables <code>v</code> are replaced with their copies <code>v_i</code> for the
state <code>i</code>. Likewise, <code>Next[v_i/v,v_{i+1}/v']</code>
means that the state variables <code>v</code> are replaced with their copies <code>v_i</code> for the state <code>i</code>, whereas the state
variables <code>v'</code> are replaced with their copies
<code>v_{i+1}</code> for the state <code>i+1</code>.</p>
<p><strong>Bounded model checking is an incomplete technique</strong>. If Apalache finds a bug
in this symbolic execution (by querying z3), then it reports a counterexample.
Otherwise, it reports that no bug was found up to the given length. If a bug
needs a long execution to get revealed, bounded model checking may miss it!</p>
<h3><a class="header" href="#15-checking-an-inductive-invariant" id="15-checking-an-inductive-invariant">1.5. Checking an inductive invariant</a></h3>
<p>To check executions of arbitrary lengths, one usually finds a formula that satisfies the two following properties:</p>
<pre><code class="language-tla">/\ Init =&gt; TypeOK /\ IndInv
/\ TypeOK /\ IndInv /\ Next =&gt; TypeOK' /\ IndInv'
</code></pre>
<p>In normal words: (1) The initial states satisfy the constraint <code>TypeOK /\ IndInv</code>,
and (2) whenever the specification makes a step when starting in a state that satisfies <code>TypeOK /\ IndInv</code>,
it ends up in a state that again satisfies <code>TypeOK /\ IndInv</code>.</p>
<p>Note that we usually check <code>IndInv</code> in conjunction with <code>TypeOK</code>, as we have to constrain the variable values.
In the <code>y2k</code> example, our inductive invariant is actually constraining the variables.
In fact, such an inductive invariant is usually called <code>TypeOK</code>.</p>
<p>To check an inductive invariant <code>IndInv</code> in Apalache, you run two commands that check the above two formulas:</p>
<ul>
<li>
<p><strong>IndInit</strong>: Check that the initial states satisfy <code>IndInv</code>:</p>
<pre><code class="language-bash">$ apalache-mc check --init=Init --inv=IndInv --length=0 &lt;myspec&gt;.tla
</code></pre>
</li>
<li>
<p><strong>IndNext</strong>: Check that <code>Next</code> does not drive us outside of <code>IndInv</code>:</p>
<pre><code class="language-bash">$ apalache-mc check --init=IndInv --inv=IndInv --length=1 &lt;myspec&gt;.tla
</code></pre>
</li>
</ul>
<p>Usually, you look for an inductive invariant to check a safety predicate. For
example, if you have found an inductive invariant <code>IndInv</code> and want to check a
safety predicate <code>Safety</code>, you have to run Apalache once again:</p>
<ul>
<li>
<p><strong>IndProp</strong>: Check that all states captured with <code>IndInv</code> satisfy the predicate <code>Safety</code>:</p>
<pre><code class="language-bash">$ apalache-mc check --init=IndInv --inv=Safety --length=0 &lt;myspec&gt;.tla
</code></pre>
</li>
</ul>
<p>It may happen that your inductive invariant <code>IndInv</code> is too weak and it
violates <code>Safety</code>. In this case, you would have to add additional constraints to <code>IndInv</code>.
Then you would have to check the queries IndInit, IndNext, and IndProp again.</p>
<h2><a class="header" href="#2-examples" id="2-examples">2. Examples</a></h2>
<h3><a class="header" href="#21-checking-safety-up-to-20-steps" id="21-checking-safety-up-to-20-steps">2.1. Checking safety up to 20 steps</a></h3>
<pre><code class="language-bash">$ cd test/tla
$ apalache-mc check --length=20 --inv=Safety y2k_override.tla
</code></pre>
<p>This command checks, whether <code>Safety</code> can be violated in 20 specification steps. If <code>Safety</code> is not violated, your spec
might still have a bug that requires a computation longer than 20 steps to manifest.</p>
<h3><a class="header" href="#22-checking-an-inductive-invariant" id="22-checking-an-inductive-invariant">2.2. Checking an inductive invariant:</a></h3>
<pre><code class="language-bash">$ cd test/tla
$ apalache-mc check --length=0 --init=Init --inv=Inv y2k_override.tla
$ apalache-mc check --length=1 --init=Inv  --inv=Inv y2k_override.tla
</code></pre>
<p>The first call to apalache checks, whether the initial states satisfy the invariant. The second call to apalache checks,
whether a single specification step satisfies the invariant, when starting in a state that satisfies the invariant. (
That is why these invariants are called inductive.)</p>
<h3><a class="header" href="#23-using-a-constant-initializer" id="23-using-a-constant-initializer">2.3. Using a constant initializer:</a></h3>
<pre><code class="language-bash">$ cd test/tla
apalache-mc check --cinit=ConstInit --length=20 --inv=Safety y2k_cinit.tla
</code></pre>
<p>This command checks, whether <code>Safety</code> can be violated in 20 specification steps.
The constants are initialized with the predicate <code>ConstInit</code>, defined in <code>y2k_cinit.tla</code> as:</p>
<pre><code class="language-tla">ConstInit == BIRTH_YEAR \in 0..99 /\ LICENSE_AGE \in 10..99
</code></pre>
<p>In this case, Apalache finds a safety violation, e.g., for
<code>BIRTH_YEAR=89</code> and <code>LICENSE_AGE=10</code>. A complete counterexample is printed in <code>counterexample.tla</code>.</p>
<p>The final lines in the file clearly indicate the state that violates the invariant:</p>
<pre><code class="language-tla">State14 ==
/\ BIRTH_YEAR = 89
/\ LICENSE_AGE = 10
/\ hasLicense = TRUE
/\ year = 0

(* The following formula holds true in the last state and violates the invariant *)

InvariantViolation == hasLicense /\ year - BIRTH_YEAR &lt; LICENSE_AGE
</code></pre>
<p><a name="lookup"></a></p>
<h2><a class="header" href="#3-module-lookup" id="3-module-lookup">3. Module lookup</a></h2>
<p>Apalache uses <a href="https://lamport.azurewebsites.net/tla/tools.html">the SANY parser</a>, which is the standard parser of TLC
and the TLA+ Toolbox. By default, SANY is looking for modules (in this order) in</p>
<ol>
<li>The current working directory.</li>
<li>The directory containing the main TLA+ file passed on the CLI.</li>
<li>A small Apalache standard library (bundled from <code>$APALACHE_HOME/src/tla</code>).</li>
<li>The Java package <code>tla2sany.StandardModules</code> (usually provided by the <code>tla2tools.jar</code> that is included in the Java
classpath).</li>
</ol>
<p><strong>Note:</strong> To let TLA+ Toolbox and TLC know about the Apalache modules, include
<code>$APALACHE_HOME/src/tla</code> in the lookup directories, as explained by Markus Kuppe for
the <a href="https://github.com/tlaplus/CommunityModules">TLA+ Community Modules</a>.</p>
<p><a name="detailed"></a></p>
<h2><a class="header" href="#4-detailed-output" id="4-detailed-output">4. Detailed output</a></h2>
<p>The location for detailed output is determined by the value of the <code>out-dir</code>
parameter, which specifies the path to a directory into which all Apalache
runs write their outputs (see <a href="config.html">configuration instructions</a>).</p>
<p>Each run will produce a unique subdirectory inside its &quot;namespace&quot;, derived from
the file name of the specification, using the following convention
<code>yyyy-MM-ddTHH-mm-ss_&lt;UNIQUEID&gt;</code>.</p>
<p>For an example, consider using the default location of the <code>run-dir</code> for a run of Apalache on a spec named <code>test.tla</code>.
This will create a directory structuring matching the following pattern:</p>
<pre><code>./_apalache-out/
└── test.tla
    └── 2021-11-05T22-54-55_810261790529975561
</code></pre>
<p>The default value for the <code>out-dir</code> is the <code>_apalache-out</code> directory in the
current working directly. The subdirectory <code>test.tla</code> is derived from the name
of the spec on which the tool was run, and the run-specific subdirectory
<code>2021-11-05T22-54-55_810261790529975561</code> gives a unique location to write the
all the outputs produced by the run.</p>
<p>The tool only writes important messages on stdout, but a detailed log can be
found in the <code>detailed.log</code> in the run-specific subdirectory.</p>
<p>The directory also includes a file <code>run.txt</code>, reporting the command line
arguments used during the run.</p>
<p>Additionally, if the parameter <code>write-intermediate</code> is set to <code>true</code> (see
<a href="config.html">configuration instructions</a>) each pass of the model checker produces
intermediate TLA+ files in the run-specific subdirectory:</p>
<ul>
<li>File <code>out-parser.tla</code> is produced as a result of parsing and importing into the intermediate representation, Apalache
TLA IR.</li>
<li>File <code>out-config.tla</code> is produced as a result of substituting CONSTANTS, as described
in <a href="./parameters.html">Setting up specification parameters</a>.</li>
<li>File <code>out-inline.tla</code> is produced as a result of inlining operator definitions and <code>LET-IN</code> definitions.</li>
<li>File <code>out-priming.tla</code> is produced as a result of replacing constants and variables in <code>ConstInit</code> and <code>Init</code> with
their primed versions.</li>
<li>File <code>out-vcgen.tla</code> is produced as a result of extracting verification conditions, e.g., invariants to check.</li>
<li>File <code>out-prepro.tla</code> is produced as a result of running all preprocessing steps.</li>
<li>File <code>out-transition.tla</code> is produced as a result of finding assignments and symbolic transitions.</li>
<li>File <code>out-opt.tla</code> is produced as a result of expression optimizations.</li>
<li>File <code>out-analysis.tla</code> is produced as a result of analysis, e.g., marking Skolemizable expressions and expressions to
be expanded.</li>
</ul>
<p><a name="parsing"></a></p>
<h2><a class="header" href="#5-parsing-and-pretty-printing" id="5-parsing-and-pretty-printing">5. Parsing and pretty-printing</a></h2>
<p>If you'd like to check that your TLA+ specification is syntactically correct, without running the model checker, you can
run the following command:</p>
<pre><code class="language-bash">$ apalache-mc parse &lt;myspec&gt;.tla
</code></pre>
<p>In this case, Apalache performs the following steps:</p>
<ol>
<li>
<p>It parses the specification with <a href="https://lamport.azurewebsites.net/tla/tools.html">SANY</a>.</p>
</li>
<li>
<p>It translates SANY semantic nodes
into <a href="https://github.com/apalache-mc/apalache/blob/master/tlair/src/main/scala/at/forsyte/apalache/tla/lir/package.scala">Apalache IR</a>
.</p>
</li>
<li>
<p>If the <code>--write-intermediate</code> flag is given, it pretty-prints the IR into
the output directory (see <a href="#detailed">Detailed output</a>).</p>
</li>
</ol>
<p>You can also write output to a specified location by using the <code>--output</code> flag.
E.g.,</p>
<pre><code class="language-bash">$ apalache-mc parse --output=result.json &lt;myspec&gt;.tla
</code></pre>
<p>will write the IR to the file <code>result.json</code>.</p>
<p>reads a TLA+ specification with the SANY parser and flattens it by</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../apalache/installation/source.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../apalache/example.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../apalache/installation/source.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../apalache/example.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src=".././highlightjs-tlaplus/dist/tlaplus.min.js"></script>
        
        <script type="text/javascript" src=".././theme/highlightTla.js"></script>
        

        

    </body>
</html>
