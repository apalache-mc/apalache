Fix spurious counter-example generation with functions of records in the arrays encoding, see #1840